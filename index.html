<!DOCTYPE html>
<html>
    <head>
        <title>DPS-JS-LIB API Docs</title>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" language="JavaScript"></script>
        <script language="JavaScript">
            "use strict";

            var ghPagesBaseUrl = "https://dasch-swiss.github.io/dsp-js-lib";
            var githubReleasesUrl = "https://api.github.com/repos/dasch-swiss/dsp-js-lib/releases";

            $( document ).ready(function() {

                $.get(githubReleasesUrl, function(data, status) {
                    if (status === "success" && Array.isArray(data)) {

                        var releases = data.filter(
                            // check that version is at least v1.0.0
                            // ignore prereleases
                            rel => rel.tag_name.charAt(1) === "1" && rel.tag_name.indexOf("-rc.") === -1
                        ).reverse();

                        releases.forEach(
                            ele => {

                                // get rid of leading "v", e.g., v1.0.0
                                var version = ele.tag_name.replace("v", "");

                                // replace "." with "_", e.g. 1.0.0 -> 1_0_0
                                var versionSegment = version.replaceAll(".", "_");

                                // create a bullet point in list
                                $(".versions").append(`<li><a href="${ghPagesBaseUrl}/${versionSegment}/index.html">${version}</a></li>`);
                            }
                        )
                    }
                });
            });


        </script>
    </head>
    <body>
        <h1>DSP-JS API Doc</h1>

        API docs for <a href="https://www.npmjs.com/package/@dasch-swiss/dsp-js">DPS-JS-LIB</a> releases:

        <ul class="versions">

        </ul>

    </body>
</html>
